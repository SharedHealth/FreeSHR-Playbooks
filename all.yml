- name: "cassandra"
  hosts: cassandra_node
  sudo: yes
  roles:
    - cassandra-cluster
  vars_files:
    - vars/cassandra.yml
  tags:
    - cassandra

- name: "opscenter"
  sudo: yes
  hosts: 
    - cassandra_node
    - opscenter_server
  roles:
    - opscenter
  tags:
    - opscenter

- name: "shr"
  hosts: shr
  sudo: yes
  roles:
    - { role: bdshr-server }
  tags:
    - shr

- hosts: freeshr-update-server
  sudo: yes
  roles:
    - { role: freeshr-update }
  tags:
    - freeshr-update-server


- hosts: mci-ui
  sudo: yes
  roles:
    - { role: apache, tags: ['infrastructure'] }
    - { role: php-packages, tags: ['infrastructure'] }
    - { role: mci-ui, tags: ['application'] }
  vars:
    mci_ui_home: "/var/www/mci_ui"
    identity_server_domain: "null"
    identity_server_port: "8080"
  tags:
    - mci-ui


- hosts: mci-server
  sudo: yes
  roles:
    - mci-server
  vars:
    mci_home: "{{lookup('env', 'HOME')}}/projects/mci"
    hostname_name: "{{ansible_fqdn}}"
  tags:
    - mci-server

- hosts: tr-server
  sudo: yes
  vars:
    local_mysql_username: "{{ mysql_username }}"
    local_mysql_password: "{{ mysql_password }}"
  roles:
   - role: mysql
   - role: tr-server
  tags:
    - tr-server

- hosts: tr-server
  sudo: yes
  vars:
    config_home: /var/lib/bdshr-terminology-server/etc
  roles:
   - role: tr-feed-server
  tags:
    - tr-feed-server
     
- hosts: datasense
  sudo: yes
  roles:
    - role: datasense-server
  tags:
    - datasense

- hosts: identity-server
  sudo: yes
  roles:
    - { role: identity-server }
  tags:
    - identity-server

- hosts: patient-journal-server
  sudo: yes
  roles:
    - { role: patient-journal }
  tags:
    - patient-journal


- hosts: dhis
  sudo: yes
  user: user
  vars:
    dhis_home: /home/dhis/
    admin_username: admin
    admin_password: 0f359740bd1cda994f8b55330c86d845
    http_port: 8080
    https_port: 8443
    tomcat_ver: 7.0.53
  roles:
     - tomcat
     - dhis
  tags:
    - dhis
     
- hosts: all
  sudo: yes
  roles:
    - { role: oracle-java}
    - { role: bdshr-user}
    - { role: nagios-agent}
  vars_files:
    - group_vars/all
    - vars/java.yml
    - vars/nrpe.yml
  tags:
    - setup

